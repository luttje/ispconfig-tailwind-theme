<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />

    <title>{{ company_name }}{{ app_title }}</title>

    <meta name="viewport"
          content="width=device-width, user-scalable=yes">
    <meta name="description"
          lang="en"
          content="" />
    <meta name="keywords"
          lang="en"
          content="" />
    <meta name="robots"
          content="noindex, nofollow" />

    <meta name="theme-path"
          content="themes/{{ current_theme }}/assets/" />

    <link rel="apple-touch-icon"
          sizes="180x180"
          href="/themes/{{ current_theme }}/assets/favicon/apple-touch-icon.png">
    <link rel="icon"
          type="image/png"
          sizes="32x32"
          href="/themes/{{ current_theme }}/assets/favicon/favicon-32x32.png">
    <link rel="icon"
          type="image/png"
          sizes="16x16"
          href="/themes/{{ current_theme }}/assets/favicon/favicon-16x16.png">
    <link rel="manifest"
          href="/themes/{{ current_theme }}/assets/favicon/site.webmanifest">
    <link rel="mask-icon"
          href="/themes/{{ current_theme }}/assets/favicon/safari-pinned-tab.svg"
          color="#cc151c">
    <link rel="shortcut icon"
          href="/themes/{{ current_theme }}/assets/favicon/favicon.ico">
    <meta name="msapplication-TileColor"
          content="#cc151c">
    <meta name="msapplication-config"
          content="/themes/{{ current_theme }}/assets/favicon/browserconfig.xml">
    <meta name="theme-color"
          content="#cc151c">

    <link rel="stylesheet"
          href="themes/{{ current_theme }}/assets/style.css" />

    <link rel="stylesheet"
          href="themes/{{ current_theme }}/assets/stylesheets/fonts.min.css" />
    <link rel="stylesheet"
          href="themes/{{ current_theme }}/assets/stylesheets/bootstrap-datetimepicker.min.css" />
    <link rel="stylesheet"
          href="themes/{{ current_theme }}/assets/stylesheets/select2.css" />
    <link rel="stylesheet"
          href="themes/{{ current_theme }}/assets/stylesheets/select2-bootstrap.css" />
    <link rel="stylesheet"
          href="themes/{{ current_theme }}/assets/stylesheets/font-awesome-4.7.0/css/font-awesome.min.css" />

    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/dist/tippy.css" />

    {% if logged_in == "n" %}
    <link rel="stylesheet"
          href="themes/{{ current_theme }}/assets/stylesheets/login.css" />
    {% endif %}
</head>

<body x-data="{ modalOpen: false, sidebarOpen: false }"
    :class="{ 'overflow-hidden sm:overflow-auto': sidebarOpen }">
    <!-- off canvas -->
    <nav id="responsive-navigation"
        data-open="false"
        x-effect="$el.setAttribute('data-open', sidebarOpen.toString())"
        class="flex flex-col -translate-x-full data-[open=true]:-translate-x-0 opacity-0 data-[open=true]:opacity-100 fixed top-0 w-full sm:w-1/2 md:w-1/3 lg:hidden h-full overflow-y-auto bg-gray-800 text-white z-50 shadow-lg transition-all p-6 duration-300 motion-reduce:transition-none">
    </nav>
    <div class="site-overlay"></div>

    <div id="container"
         class="container mx-auto px-2 sm:px-4 md:px-6 lg:px-8 min-h-screen flex flex-col">
        <div id="main-wrapper"
             class="flex-grow">
            <div id="inner-wrapper">
                <div class="flex flex-col gap-4 sm:flex-row w-full sm:justify-between items-center mt-4">
                    <div class="flex w-full gap-4 items-center">
                        <!-- off canvas menu button -->
                        <div class="menu-btn flex items-center cursor-pointer rounded px-4 py-2 lg:hidden hover:bg-gray-800 hover:text-white"
                            @click="sidebarOpen = !sidebarOpen">&#9776;</div>
                        <!-- logo -->
                        <div id="logo"
                             class="bg-no-repeat bg-contain w-[200px] h-[65px]"
                             style="background: url({{ base64_logo_txt }}) no-repeat;width:{{ base64_logo_width }};height:{{ base64_logo_height }}">
                            <a href="#" class="block w-full h-full"></a></div>
                    </div>
                    <div id="headerbar"
                         class="flex w-full items-center justify-end gap-4">
                        {% if cpuser %}
                            {% if usertype == "normaluser" %}
                            <!-- search field -->
                            <form action="#"
                                method="get"
                                id="searchform"
                                class="flex relative">
                                <div class="flex gap-2 items-stretch">
                                    {% render './components/input/text', id: 'globalsearch', placeholder: '{{ globalsearch_searchfield_watermark_txt }}' %}
                                    {% render_json './components/button/primary', {
                                        "slot": "<span class=\"icon icon-lens -ml-[5px] text-base group-hover:text-white\"></span>"
                                    } %}
                                </div>
                            </form>
                            {% endif %}

                            {% render_json "components/button/danger", {
                                    "slot": "{{ logout_txt }} {{ cpuser }}",
                                    "attributes": [
                                        ["id", "logout-button"],
                                        ["data-load-content", "login/logout.php"]
                                    ]
                                }
                            %}
                        {% endif %}
                    </div>

                    <div class="notification cursor-pointer"
                         @click="modalOpen = true">
                        <span class="notification_text">{{ datalog_changes_count }}</span>
                    </div>

                    <!-- Datalogstatus Modal -->
                    <div id="datalogModal"
                         class="modal fade"
                         role="dialog"
                         x-show="modalOpen">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button"
                                            class="close"
                                            @click="modalOpen = false">&times;</button>
                                    <h4 class="modal-title">{{ datalog_changes_txt }}</h4>
                                </div>
                                <div class="modal-body">
                                    <ul>
                                        {% loop datalog_changes %}
                                        <li><strong>{{ text }}:</strong> {{ count }}</li>
                                        {% endloop %}
                                    </ul>
                                </div>
                                <div class="modal-footer">
                                    <button type="button"
                                            class=""
                                            @click="modalOpen = false">{{ datalog_changes_close_txt }}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- END Datalogstatus Modal -->
                </div>
                {% if logged_in == "y" %}
                <div id="topnav-container"
                     class="pb-6">
                </div>
                {% endif %}
                <div class="flex flex-wrap gap-6 flex-col lg:flex-row-reverse">
                    <!-- content -->
                    <div id="content"
                         class="flex-1 lg:w-3/4">
                        <noscript>This page needs JavaScript to be enabled.</noscript>
                        <form method="post"
                              action=""
                              id="pageForm"
                              name="pageForm"
                              enctype="multipart/form-data"
                              class="form-horizontal"
                              role="form">
                            <div id="pageContent"
                                 data-startpage="{{ startpage }}"><!-- AJAX CONTENT --></div>
                        </form>
                    </div>
                    <!-- news sidebar -->
                    {% if logged_in == "y" %}
                    <div id="sidebar"
                         class="w-full lg:w-1/5 xl:w-1/6 p-4 border rounded self-start float-right bg-gray-50 shadow-inner">
                    </div>
                    {% endif %}
                </div>
                <footer class="my-8 py-4 border bg-gray-100 text-gray-600 text-center text-xs rounded">
                    Powered by <a href="{{ app_link }}"
                       target="_blank"
                       class="text-blue-500 hover:underline">{{ app_title }}</a>
                </footer>
            </div>
        </div>
    </div>

    <script type="module"
            src="themes/{{ current_theme }}/assets/tailwindone.es.js"></script>
    <script type="text/javascript"
            src="js/jquery.min.js"></script>
    <script src="themes/{{ current_theme }}/assets/javascripts/bootstrap.min.js"></script>
    <script src="themes/{{ current_theme }}/assets/javascripts/bootstrap-datetimepicker.min.js"></script>
    <script src="themes/{{ current_theme }}/assets/javascripts/modernizr.custom.min.js"></script>
    <script src="js/select2/select2.min.js"></script>
    <script src="js/scrigo.js.php"></script>
    <script type="text/javascript"
            src="js/jquery.ispconfigsearch.js"></script>
    <script type="text/javascript"
            src="js/jquery.tipsy.js"></script>
    {% loop js_d_includes %}
    <script type="text/javascript"
            src="js/js.d/{{ file }}"></script>
    {% endloop %}
    <script>
          window.addEventListener('ispconfig:loaded', function() {
            ISPConfig.tabChangeDiscard = '{{ tabchange_discard_enabled }}';
            ISPConfig.tabChangeWarning = '{{ tabchange_warning_enabled }}';
            ISPConfig.tabChangeWarningTxt = '{{ global_tabchange_warning_txt }}';
            ISPConfig.tabChangeDiscardTxt = '{{ global_tabchange_discard_txt }}';

            {% if use_loadindicator == 'y' %}ISPConfig.setOption('useLoadIndicator', true);{% endif %}
            {% if use_combobox == 'y' %}ISPConfig.setOption('useComboBox', true);{% endif %}
          });

          $(document).ready(function() {
              $('#globalsearch').ispconfigSearch({
                  dataSrc: '/dashboard/ajax_get_json.php?type=globalsearch',
                  resultsLimit: '$ {{ globalsearch_resultslimit_of_txt }} % {{ globalsearch_resultslimit_results_txt }}',
                  noResultsText: '{{ globalsearch_noresults_text_txt }}',
                  noResultsLimit: '{{ globalsearch_noresults_limit_txt }}',
                  searchFieldWatermark: '{{ globalsearch_searchfield_watermark_txt }}',
                  resultBoxPosition: ''
              });

          ISPConfig.loadInitContent();

          });
    </script>
</body>
</html>
